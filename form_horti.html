<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pendataan Harga Hortikultura</title>

<style>
*{box-sizing:border-box}

body{
font-family:Segoe UI,system-ui,sans-serif;
margin:0;
padding:20px;
background:
linear-gradient(rgba(0,0,0,.55),rgba(0,0,0,.55)),
url("https://voxntt.com/wp-content/uploads/2018/07/sayur-dan-buah-sehat.jpg") center/cover fixed;
}

.container{
max-width:1100px;
margin:auto;
}

h1{
color:#fff;
text-align:center;
margin-bottom:28px;
line-height:1.4;
text-shadow:0 4px 12px rgba(0,0,0,.6);
}

.card{
background:rgba(255,255,255,.94);
border-radius:18px;
padding:22px;
margin-bottom:28px;
box-shadow:0 12px 30px rgba(0,0,0,.25);
}

.section-title{
font-size:20px;
font-weight:600;
color:#1e8449;
border-left:6px solid #27ae60;
padding-left:12px;
margin-bottom:16px;
}

.grid{
display:grid;
grid-template-columns:2fr 1fr 1fr;
gap:12px;
align-items:center;
}

.grid.header-row{
font-weight:600;
color:#555;
margin-bottom:6px;
}

.label{
padding:10px 4px;
font-size:15px;
}

input{
width:100%;
padding:12px;
border-radius:10px;
border:1px solid #ddd;
font-size:15px;
}

input:focus{
outline:none;
border-color:#27ae60;
box-shadow:0 0 0 3px rgba(39,174,96,.2);
}

button{
width:100%;
padding:16px;
border:none;
border-radius:14px;
background:#27ae60;
color:white;
font-size:16px;
font-weight:600;
cursor:pointer;
box-shadow:0 6px 18px rgba(39,174,96,.4);
}

button:disabled{background:#999}

#notif{
display:none;
text-align:center;
margin-top:16px;
font-weight:600;
color:#27ae60;
}

@media(max-width:720px){
.grid{
grid-template-columns:1fr;
}
.grid.header-row{
display:none;
}
.label{
font-weight:600;
}
input{
margin-bottom:6px;
}
}
</style>
</head>
<body>

<div class="container">
<h1>
DINAS PERTANIAN KABUPATEN INDRAGIRI HILIR  
<span style="display:block;font-size:18px;font-weight:400;margin-top:6px;">
Pendataan Harga Komoditi Hortikultura
</span>
</h1>

<div id="formArea"></div>

<button id="saveBtn">Simpan Data Harga</button>
<div id="notif">‚è≥ Menyimpan data...</div>
</div>

<script>
const dataLampiran = {
"Bahan Makanan Utama":[
"Gabah GKP","Gabah GKS","Gabah GKG","Beras No.1","Beras No.2",
"Beras eks Dolog","Beras Ketan Putih","Beras Ketan Hitam",
"Jagung Kuning Pipilan","Jagung Putih Pipilan",
"Ketela Pohon","Ketela Rambat",
"Kacang Tanah","Kacang Hijau","Kacang Kedelai","Kacang Merah"
],
"Sayuran-sayuran":[
"Kacang Panjang","Lombok/Cabe","Bawang Merah","Buncis","Bayam",
"Bawang Daun","Kubis/Kol","Kangkung","Ketimun","Petsai/Sawi",
"Terung","Kentang","Cabe Rawit","Cabe Keriting","Petai","Tomat","Wortel"
],
"Buah-buahan":[
"Alpukat","Apel","Jambu Air","Duku","Jeruk","Durian",
"Melon","Mangga","Pisang Barangan","Semangka","Nangka",
"Nenas","Pepaya","Rambutan","Salak","Sawo"
]
};

const area=document.getElementById("formArea");

for(let group in dataLampiran){

const card=document.createElement("div");
card.className="card";

card.innerHTML=`
<div class="section-title">${group}</div>
<div class="grid header-row">
<div>Komoditi</div>
<div>Harga Grosir</div>
<div>Harga Eceran</div>
</div>
`;

dataLampiran[group].forEach(k=>{
const row=document.createElement("div");
row.className="grid";

row.innerHTML=`
<div class="label">${k}</div>
<input type="number" inputmode="numeric" placeholder="Rp">
<input type="number" inputmode="numeric" placeholder="Rp">
`;

card.appendChild(row);
});

area.appendChild(card);
}

/* ==== URL GAS ==== */
const scriptURL="https://script.google.com/macros/s/AKfycbw0i0M5QxxuXDUMMh3up1Edz3lcFq3TWUSpa3Jz18cKh9T6Jm3J1aj8Ydx0INUV5YE9/exec";

const btn=document.getElementById("saveBtn");
const notif=document.getElementById("notif");

btn.addEventListener("click", async () => {

btn.disabled=true;
btn.innerText="Menyimpan...";
notif.style.display="block";
notif.innerText="‚è≥ Menyimpan data...";

const payload=[];

document.querySelectorAll(".card .grid:not(.header-row)").forEach(r=>{
payload.push({
komoditi:r.children[0].innerText.trim(),
harga_grosir:Number(r.children[1].value)||0,
harga_eceran:Number(r.children[2].value)||0
});
});

try{
const formData = new FormData();
formData.append("data", JSON.stringify(payload));

const res = await fetch(scriptURL,{
method:"POST",
body: formData
});

if(!res.ok) throw new Error("Gagal kirim");

notif.innerText="‚úÖ Data berhasil tersimpan";
btn.innerText="Tersimpan ‚úî";

// üëâ TAMBAHKAN BARIS INI
document.querySelectorAll("input").forEach(i => i.value = "");

setTimeout(()=>{
btn.disabled=false;
btn.innerText="Simpan Data Harga";
},2500);

}catch(err){
notif.innerText="‚ùå Gagal menyimpan data";
btn.disabled=false;
btn.innerText="Simpan Data Harga";
console.error(err);
}
});
</script>
</body>
</html>












