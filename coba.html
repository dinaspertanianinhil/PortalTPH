<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Dashboard Harga Pangan Live</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{font-family:Inter,Arial;background:#f4f6f9;margin:0}
.container{max-width:1200px;margin:auto;padding:20px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px}
.card{background:white;padding:16px;border-radius:16px;box-shadow:0 6px 16px rgba(0,0,0,.08)}
.price{font-size:22px;font-weight:700;color:#1e7f4f}
canvas{height:70px!important}
</style>
</head>
<body>

<div class="container">
<h2>Harga Komoditas Hari Ini</h2>
<div id="cards" class="grid"></div>
</div>

<script>
const sheetURL = "PASTE_LINK_CSV_KAMU_DI_SINI";

fetch(sheetURL)
 .then(r=>r.text())
 .then(csv=>{
   const rows = csv.trim().split("\n").slice(1);
   const data = {};

   rows.forEach(r=>{
     const [tanggal, komoditas, harga] = r.split(",");
     if(!data[komoditas]) data[komoditas]=[];
     data[komoditas].push(Number(harga));
   });

   const container = document.getElementById("cards");

   Object.keys(data).forEach((k,i)=>{
     const card = document.createElement("div");
     card.className="card";
     card.innerHTML = `
       <h4>${k}</h4>
       <div class="price">Rp ${data[k].slice(-1)[0].toLocaleString()}</div>
       <canvas id="c${i}"></canvas>
     `;
     container.appendChild(card);

     new Chart(document.getElementById(`c${i}`),{
       type:"line",
       data:{labels:data[k].map((_,i)=>i+1),
         datasets:[{data:data[k], tension:.4}]},
       options:{plugins:{legend:{display:false}},scales:{x:{display:false},y:{display:false}}}
     });
   });
 });
</script>

</body>
</html>
